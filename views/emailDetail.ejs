<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Email Detail</title>
    <link rel="stylesheet" href="./css/mail.css" />
  </head>
   <body>

<%- include('layout', { 
    title: 'Email Detail', 
    user: user, 
    body: `
        <section>
            <h2>${email.subject}</h2>
            <p><strong>From:</strong> ${email.fullname}</p>
            <p><strong>Received:</strong> ${new Date(email.timestamp).toLocaleString()}</p>
            <p>${email.body}</p>
            ${email.attachments && email.attachments.length > 0 ? `
                <h3>Attachments:</h3>
                <ul>
                    ${email.attachments.map(attachment => `
                        <li>
                            <a href="/download/${attachment.filename}" download>${attachment.filename}</a>
                        </li>
                    `).join('')}
                </ul>
            ` : ''}
        </section>
    `
}) %>
</body>
</html>
